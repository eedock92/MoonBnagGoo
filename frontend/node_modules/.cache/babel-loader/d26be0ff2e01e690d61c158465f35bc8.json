{"ast":null,"code":"var _jsxFileName = \"D:\\\\ByungSoo\\\\DEV\\\\potfolio\\\\ecommerce_react\\\\frontend\\\\src\\\\screens\\\\ProductScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Row, Col, Image, ListGroup, Card, Button, Form } from 'react-bootstrap';\nimport Rating from '../components/Rating';\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport Meta from '../components/Meta';\nimport { listProductDetails, createProductReview } from '../actions/productActions';\nimport { PRODUCT_CREATE_REVIEW_RESET } from '../constants/productConstants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ProductScreen = ({\n  history,\n  match\n}) => {\n  _s();\n\n  const [qty, setQty] = useState(1);\n  const [rating, setRating] = useState(1);\n  const [comment, setComment] = useState('');\n  const dispatch = useDispatch();\n  const productDetails = useSelector(state => state.productDetails);\n  const {\n    loading,\n    error,\n    product\n  } = productDetails;\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    userInfo\n  } = userLogin;\n  const productReviewCreate = useSelector(state => state.productReviewCreate);\n  const {\n    success: successProductReview,\n    error: errorProductReview\n  } = productReviewCreate;\n  useEffect(() => {\n    if (successProductReview) {\n      alert('리뷰를 작성 하였습니다');\n      setRating(0);\n      setComment('');\n      dispatch({\n        type: PRODUCT_CREATE_REVIEW_RESET\n      });\n    }\n\n    dispatch(listProductDetails(match.params.id));\n  }, [dispatch, match, successProductReview]);\n\n  const addToCartHandler = () => {\n    history.push(`/cart/${match.params.id}?qty=${qty}`);\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    console.log(\"comment : \" + {\n      comment\n    });\n    dispatch(createProductReview(match.params.id, {\n      rating,\n      comment\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      className: \"btn btn-outline-primary my-3\",\n      to: \"/\",\n      children: \"Go back\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }, this) : error ? /*#__PURE__*/_jsxDEV(Message, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Meta, {\n        title: product.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Image, {\n            src: product.image,\n            alt: product.name,\n            fluid: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 3,\n          children: /*#__PURE__*/_jsxDEV(ListGroup, {\n            variant: \"flush\",\n            children: [/*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: /*#__PURE__*/_jsxDEV(Rating, {\n                value: product.rating,\n                text: `${product.numReviews} 리뷰`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: [\"\\uAC00 \\uACA9  \", product.price, \"\\uC6D0\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: product.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 3,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(ListGroup, {\n              children: [/*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                variant: \"flush\",\n                children: /*#__PURE__*/_jsxDEV(Row, {\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    children: \"\\uAC00 \\uACA9\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 102,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: [product.price, \"\\uC6D0\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 106,\n                      columnNumber: 41\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 105,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                variant: \"flush\",\n                children: /*#__PURE__*/_jsxDEV(Row, {\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    children: \"\\uC7AC \\uACE0\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 113,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    children: product.countInStock > 0 ? `${product.countInStock} 개` : 'SOLD OUT'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 116,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 29\n              }, this), product.countInStock > 0 && /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                children: /*#__PURE__*/_jsxDEV(Row, {\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    children: \"\\uC218\\uB7C9\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                      as: \"select\",\n                      value: qty,\n                      onChange: e => setQty(e.target.value),\n                      children: [...Array(product.countInStock).keys()].map(x => /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: x + 1,\n                        children: x + 1\n                      }, x + 1, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 134,\n                        columnNumber: 57\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 128,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 127,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: addToCartHandler,\n                  className: \"btn-block\",\n                  type: \"button\",\n                  disabled: product.countInStock === 0,\n                  children: \"\\uC7A5\\uBC14\\uAD6C\\uB2C8\\uC5D0 \\uB2F4\\uAE30\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\uB9AC\\uBDF0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 25\n          }, this), product.reviews.length === 0 && /*#__PURE__*/_jsxDEV(Message, {\n            children: \"\\uB9AC\\uBDF0\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 57\n          }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n            varaint: \"flush\",\n            children: [product.reviews.map(review => /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: review.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 38\n              }, this), /*#__PURE__*/_jsxDEV(Rating, {\n                value: review.rating,\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: review.createdAt.substring(0, 10)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 38\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: review.comment\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 38\n              }, this)]\n            }, review._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 34\n            }, this)), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"\\uB9AC\\uBDF0 \\uC791\\uC131\\uD558\\uAE30\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 33\n              }, this), errorProductReview && /*#__PURE__*/_jsxDEV(Message, {\n                variant: \"danger\",\n                children: errorProductReview\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 56\n              }, this), userInfo ? /*#__PURE__*/_jsxDEV(Form, {\n                onSubmit: submitHandler,\n                children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n                  controlId: \"rating\",\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \"\\uD3C9\\uC810\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 182,\n                    columnNumber: 47\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    as: \"select\",\n                    value: rating,\n                    onChange: e => setRating(e.target.value),\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 186,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"5\",\n                      children: \"5 - \\uC870\\uC544\\uC870\\uC544\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 187,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"4\",\n                      children: \"4 - \\uC870\\uC544\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 188,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"3\",\n                      children: \"3 - \\uBCF4\\uD1B5\\uC774\\uC57C\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 189,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"2\",\n                      children: \"2 - \\uBCC4\\uB85C\\uC58C\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 190,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"1\",\n                      children: \"1 - \\uB098\\uBED0\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 191,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 47\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                  controlId: \"comment\",\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \"\\uC758\\uACAC\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 196,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    as: \"textarea\",\n                    row: \"3\",\n                    value: comment,\n                    onChange: e => setComment(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 197,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 43\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  variant: \"secondary\",\n                  children: \"\\uB9AC\\uBDF0\\uC4F0\\uAE30\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 43\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 38\n              }, this) : /*#__PURE__*/_jsxDEV(Message, {\n                children: [\"\\uBA3C\\uC800\", ' ', /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/login\",\n                  children: \"\\uB85C\\uADF8\\uC778\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 41\n                }, this), ' ', \"\\uD558\\uC138\\uC694\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 40\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 30\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true);\n};\n\n_s(ProductScreen, \"jGJImgcHwWEiUBkjq+UiArCq0nk=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = ProductScreen;\nexport default ProductScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductScreen\");","map":{"version":3,"sources":["D:/ByungSoo/DEV/potfolio/ecommerce_react/frontend/src/screens/ProductScreen.js"],"names":["React","useState","useEffect","Link","useDispatch","useSelector","Row","Col","Image","ListGroup","Card","Button","Form","Rating","Message","Loader","Meta","listProductDetails","createProductReview","PRODUCT_CREATE_REVIEW_RESET","ProductScreen","history","match","qty","setQty","rating","setRating","comment","setComment","dispatch","productDetails","state","loading","error","product","userLogin","userInfo","productReviewCreate","success","successProductReview","errorProductReview","alert","type","params","id","addToCartHandler","push","submitHandler","e","preventDefault","console","log","name","image","numReviews","price","description","countInStock","target","value","Array","keys","map","x","reviews","length","review","createdAt","substring","_id"],"mappings":"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","sourcesContent":["import React, { useState ,useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Row, Col, Image, ListGroup, Card, Button, Form} from 'react-bootstrap'\r\nimport Rating from '../components/Rating'\r\nimport Message from '../components/Message'\r\nimport Loader from '../components/Loader'\r\nimport Meta from '../components/Meta'\r\nimport { listProductDetails, \r\n    createProductReview \r\n} from '../actions/productActions'\r\nimport { PRODUCT_CREATE_REVIEW_RESET } from '../constants/productConstants'\r\n\r\n\r\n\r\nconst ProductScreen = ( { history, match }) => {\r\n    const [qty, setQty] = useState(1)\r\n    const [rating, setRating] = useState(1)\r\n    const [comment, setComment] = useState('')\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const productDetails = useSelector(state => state.productDetails)\r\n    const { loading, error, product } = productDetails\r\n\r\n    const userLogin = useSelector( state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n    \r\n    const productReviewCreate = useSelector(state => state.productReviewCreate)\r\n    const { success : successProductReview, \r\n            error: errorProductReview \r\n         } = productReviewCreate\r\n\r\n    useEffect(() => {\r\n        if(successProductReview){\r\n            alert('리뷰를 작성 하였습니다')\r\n            setRating(0)\r\n            setComment('')\r\n            dispatch({type : PRODUCT_CREATE_REVIEW_RESET})\r\n        }\r\n\r\n        dispatch( listProductDetails(match.params.id))\r\n    }, [dispatch, match, successProductReview])\r\n\r\n   const addToCartHandler = () => {\r\n        history.push(`/cart/${match.params.id}?qty=${qty}`)\r\n   }\r\n\r\n   const submitHandler = e => {\r\n       e.preventDefault()\r\n       console.log(\"comment : \" + {comment})\r\n       dispatch(createProductReview(match.params.id, {rating, comment}))\r\n   }\r\n\r\n    return (\r\n        <>  \r\n            <Link className=\"btn btn-outline-primary my-3\" to='/'>\r\n                Go back\r\n            </Link>\r\n\r\n            {loading ? \r\n                <Loader/>  \r\n                : error ? \r\n                <Message variant='danger'>{error}</Message> \r\n                : (\r\n                    <>\r\n                    <Meta title={product.name}/>\r\n                    <Row>\r\n                    <Col md={6}>\r\n                        <Image src={product.image} alt={product.name} fluid/>\r\n                    </Col>\r\n                    <Col md={3}>\r\n\r\n                        <ListGroup variant='flush'>\r\n                            <ListGroup.Item>\r\n                                <h3>{product.name}</h3>\r\n                            </ListGroup.Item>\r\n                    \r\n\r\n                        <ListGroup.Item>\r\n                            <Rating \r\n                            value={product.rating} \r\n                            text = {`${product.numReviews} 리뷰`}\r\n                            />\r\n                        </ListGroup.Item>\r\n\r\n                        <ListGroup.Item>\r\n                            가 격  {product.price}원\r\n                        </ListGroup.Item>\r\n\r\n                        <ListGroup.Item>\r\n                            {product.description}\r\n                        </ListGroup.Item>\r\n                        </ListGroup>\r\n                    </Col>\r\n\r\n                    <Col md={3}>\r\n                        <Card>\r\n                            <ListGroup>\r\n                            <ListGroup.Item variant='flush'>\r\n                                <Row>\r\n                                    <Col>\r\n                                        가 격 \r\n                                    </Col>\r\n                                    <Col>\r\n                                        <strong>{product.price}원</strong>\r\n                                    </Col>\r\n                                </Row>\r\n                            </ListGroup.Item>\r\n\r\n                            <ListGroup.Item variant='flush'>\r\n                                <Row>\r\n                                    <Col>\r\n                                        재 고 \r\n                                    </Col>\r\n                                    <Col>\r\n                                        {product.countInStock > 0 ? `${product.countInStock} 개`: 'SOLD OUT'}\r\n                                    </Col>\r\n                                </Row>\r\n                            </ListGroup.Item>\r\n\r\n                            {product.countInStock > 0 && \r\n                                (\r\n                                <ListGroup.Item>\r\n                                    <Row>\r\n                                        <Col>수량</Col>\r\n                                        <Col>\r\n                                            <Form.Control as='select' \r\n                                                       value={qty} \r\n                                                    onChange={(e) => setQty(e.target.value)}>\r\n                                                { \r\n                                                    [...Array(product.countInStock).keys()].map(x => (\r\n                                                    \r\n                                                        <option key = {x + 1} value= {x + 1}>\r\n                                                            { x + 1}\r\n                                                        </option>\r\n                                                        \r\n                                                    ))\r\n                                                }\r\n                                            </Form.Control>\r\n                                        </Col>\r\n                                    </Row>\r\n                                </ListGroup.Item>\r\n                            )}\r\n\r\n\r\n                            <ListGroup.Item>\r\n                                <Button \r\n                                    onClick = {addToCartHandler}\r\n                                    className=\"btn-block\" \r\n                                        type=\"button\"\r\n                                    disabled={product.countInStock === 0}\r\n                                >\r\n                                    장바구니에 담기\r\n                                </Button>\r\n                            </ListGroup.Item>\r\n\r\n                            </ListGroup>\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col md={6}>\r\n                        <h2>리뷰</h2>\r\n                        {product.reviews.length === 0 &&<Message>리뷰가 없습니다.</Message>}\r\n                        <ListGroup varaint='flush'>\r\n                             {product.reviews.map(review => (\r\n                                 <ListGroup.Item key={review._id}>\r\n                                     <strong>{review.name}</strong>\r\n                                     <Rating value={review.rating}>\r\n                                        <p>{review.createdAt.substring(0,10)}</p>\r\n                                     </Rating>\r\n                                     <p>{review.comment}</p>\r\n                                 </ListGroup.Item>\r\n                             ))}   \r\n                             <ListGroup.Item>\r\n                                <h2>리뷰 작성하기</h2>\r\n                                {errorProductReview && <Message variant='danger'>{errorProductReview}</Message>}\r\n                                {userInfo ? \r\n                                    (<Form onSubmit={submitHandler}>\r\n                                          <Form.Group controlId='rating'>\r\n                                              <Form.Label>평점</Form.Label>\r\n                                              <Form.Control as='select' \r\n                                                            value={rating} \r\n                                                            onChange={(e)=> setRating(e.target.value)}>\r\n                                                <option value = '' >선택하세요</option>\r\n                                                <option value = '5'>5 - 조아조아</option>\r\n                                                <option value = '4'>4 - 조아</option>\r\n                                                <option value = '3'>3 - 보통이야</option>\r\n                                                <option value = '2'>2 - 별로얌</option>\r\n                                                <option value = '1'>1 - 나뻐</option>\r\n                                                \r\n                                              </Form.Control>\r\n                                          </Form.Group>  \r\n                                          <Form.Group controlId='comment'>\r\n                                            <Form.Label>의견</Form.Label>\r\n                                            <Form.Control\r\n                                                as = 'textarea'\r\n                                                row = '3'\r\n                                                value = {comment}\r\n                                                onChange={ e => setComment(e.target.value)}\r\n                                            ></Form.Control>\r\n                                          </Form.Group>\r\n                                          <Button type='submit' variant='secondary'>\r\n                                            리뷰쓰기\r\n                                          </Button>\r\n                                    </Form>) \r\n                                    : (<Message> \r\n                                        먼저 \r\n                                        {' '}\r\n                                        <Link to ='/login'>로그인</Link>\r\n                                        {' '}\r\n                                        하세요\r\n                                    </Message>)}\r\n                            </ListGroup.Item>                    \r\n                        </ListGroup>\r\n                    </Col>\r\n                </Row>\r\n                </>\r\n                )}\r\n            \r\n        </>\r\n    )\r\n}\r\n\r\nexport default ProductScreen\r\n"]},"metadata":{},"sourceType":"module"}